var N=Object.defineProperty;var g=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var S=(a,e,n)=>e in a?N(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,y=(a,e)=>{for(var n in e||(e={}))O.call(e,n)&&S(a,n,e[n]);if(g)for(var n of g(e))T.call(e,n)&&S(a,n,e[n]);return a};import{S as Y,i as $,s as j,e as p,c as v,a as _,d as h,b as w,f as K,G as U,H as k,A as E}from"../chunks/vendor-dbb812ab.js";function V(a){let e,n;return{c(){e=p("body"),n=p("div"),this.h()},l(r){e=v(r,"BODY",{class:!0});var i=_(e);n=v(i,"DIV",{id:!0,class:!0});var c=_(n);c.forEach(h),i.forEach(h),this.h()},h(){w(n,"id","game-board"),w(n,"class","svelte-1ac9b3a"),w(e,"class","svelte-1ac9b3a")},m(r,i){K(r,e,i),U(e,n)},p:k,i:k,o:k,d(r){r&&h(e)}}}const X=5,Z=5,l=21;function z(){return{x:Math.floor(Math.random()*l)+1,y:Math.floor(Math.random()*l)+1}}function J(a){return a.x<1||a.x>l||a.y<1||a.y>l}function Q(a,e){return a.x===e.x&&a.y===e.y}function W(a){const e=[{x:11,y:11}];let n=x(),r=0,i=!1;const c=document.getElementById("game-board");let s={x:0,y:0},u={x:0,y:0};function A(){m(n)&&(I(Z),n=x())}function D(t){E(()=>{const o=document.createElement("div");o.style.gridRowStart=n.y,o.style.gridColumnStart=n.x,o.classList.add("food"),t.appendChild(o)})}function x(){let t;for(;t==null||m(t);)t=z();return t}let f=0;function R(){F();const t=B();for(let o=e.length-2;o>=0;o--)e[o+1]=y({},e[o]);e[0].x+=t.x,e[0].y+=t.y}function G(t){E(()=>{e.forEach(o=>{const d=document.createElement("div");d.style.gridRowStart=o.y,d.style.gridColumnStart=o.x,d.classList.add("snake"),t.appendChild(d)})})}function I(t){f+=t}function m(t,{ignoreHead:o=!1}={}){return e.some((d,H)=>o&&H===0?!1:Q(d,t))}function L(){return e[0]}function P(){return m(e[0],{ignoreHead:!0})}function F(){for(let t=0;t<f;t++)e.push(y({},e[e.length-1]));f=0}function b(t){if(i){confirm("You lost. Press ok to restart.")&&(window.location="/");return}window.requestAnimationFrame(b),!((t-r)/1e3<1/X)&&(r=t,M(),C())}window.requestAnimationFrame(b);function M(){R(),A(),q()}function C(){c.innerHTML="",G(c),D(c)}function q(){i=J(L())||P()}window.addEventListener("keydown",t=>{switch(t.key){case"ArrowUp":if(u.y!==0)break;s={x:0,y:-1};break;case"ArrowDown":if(u.y!==0)break;s={x:0,y:1};break;case"ArrowLeft":if(u.x!==0)break;s={x:-1,y:0};break;case"ArrowRight":if(u.x!==0)break;s={x:1,y:0};break}});function B(){return u=s,s}return[]}class ne extends Y{constructor(e){super();$(this,e,W,V,j,{})}}export{ne as default};
